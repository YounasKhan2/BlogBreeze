{% extends 'base.html' %}

{% block title %}{{ category.name }} - BlogBreeze{% endblock %}

{% block content %}
<main class="w-full max-w-4xl mx-auto flex-1 px-4 py-8 sm:py-12">
    <div class="flex flex-col gap-8">
        <!-- Breadcrumbs -->
        <div class="flex flex-wrap gap-2">
            <a class="text-sm font-medium text-primary hover:underline" href="{% url 'blog:post_list' %}">Home</a>
            <span class="text-sm font-medium text-text-secondary-light dark:text-text-secondary-dark">/</span>
            <a class="text-sm font-medium text-primary hover:underline" href="{% url 'blog:category_list' %}">Categories</a>
            <span class="text-sm font-medium text-text-secondary-light dark:text-text-secondary-dark">/</span>
            <span class="text-sm font-medium text-text-light dark:text-text-dark">{{ category.name }}</span>
        </div>
        
        <!-- Back Button -->
        <div class="mb-4">
            <a href="{% url 'blog:category_list' %}" class="inline-flex items-center gap-2 text-sm font-medium text-text-secondary-light dark:text-text-secondary-dark hover:text-primary transition-colors">
                <span class="material-symbols-outlined text-lg">arrow_back</span>
                <span>Back to Categories</span>
            </a>
        </div>
        
        <!-- Page Heading -->
        <div class="flex flex-wrap justify-between gap-3">
            <div class="flex min-w-72 flex-col gap-2">
                <p class="text-text-light dark:text-text-dark text-4xl sm:text-5xl font-black tracking-tighter">{{ category.name }}</p>
                {% if category.description %}
                    <p class="text-text-secondary-light dark:text-text-secondary-dark text-base font-normal leading-normal max-w-2xl">
                        {{ category.description }}
                    </p>
                {% endif %}
            </div>
        </div>
        
        {% if posts %}
            <!-- Post Grid -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                {% for post in posts %}
                    <div class="flex flex-col gap-3">
                        <a class="block" href="{% url 'blog:post_detail' post.slug %}">
                            <div class="w-full bg-center bg-no-repeat aspect-video bg-cover rounded-lg mb-2" 
                                 style="background-image: url('{% if post.featured_image %}{{ post.featured_image.url }}{% else %}https://images.unsplash.com/photo-1499750310107-5fef28a66643?w=800{% endif %}');"></div>
                        </a>
                        <div>
                            <h3 class="text-text-light dark:text-text-dark text-lg font-bold leading-tight">
                                <a href="{% url 'blog:post_detail' post.slug %}" class="hover:text-primary transition-colors">
                                    {{ post.title }}
                                </a>
                            </h3>
                            <p class="text-text-secondary-light dark:text-text-secondary-dark text-sm font-normal leading-normal mt-1">
                                {{ post.author.username }} â€¢ {{ post.created_at|date:"d M Y" }}
                            </p>
                        </div>
                    </div>
                {% endfor %}
            </div>
            
            <!-- Pagination -->
            {% if is_paginated %}
                <div class="flex items-center justify-center pt-8 gap-2">
                    {% if page_obj.has_previous %}
                        <a href="?page={{ page_obj.previous_page_number }}" class="flex size-9 items-center justify-center text-text-light dark:text-text-dark hover:bg-black/5 dark:hover:bg-white/10 rounded-lg">
                            <span class="material-symbols-outlined text-xl">chevron_left</span>
                        </a>
                    {% endif %}
                    
                    {% for num in page_obj.paginator.page_range %}
                        {% if page_obj.number == num %}
                            <span class="flex size-9 items-center justify-center text-sm font-bold bg-primary/20 dark:bg-primary/30 text-primary rounded-full">
                                {{ num }}
                            </span>
                        {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                            <a href="?page={{ num }}" class="flex size-9 items-center justify-center text-sm font-medium text-text-light dark:text-text-dark hover:bg-black/5 dark:hover:bg-white/10 rounded-full">
                                {{ num }}
                            </a>
                        {% endif %}
                    {% endfor %}
                    
                    {% if page_obj.has_next %}
                        <a href="?page={{ page_obj.next_page_number }}" class="flex size-9 items-center justify-center text-text-light dark:text-text-dark hover:bg-black/5 dark:hover:bg-white/10 rounded-lg">
                            <span class="material-symbols-outlined text-xl">chevron_right</span>
                        </a>
                    {% endif %}
                </div>
            {% endif %}
        {% else %}
            <!-- Empty State -->
            <div class="flex flex-col items-center justify-center py-20">
                <p class="text-2xl font-bold mb-2 text-text-light dark:text-text-dark">No posts in this category</p>
                <p class="text-text-secondary-light dark:text-text-secondary-dark">Check back later for new content!</p>
            </div>
        {% endif %}
    </div>
</main>
{% endblock %}
